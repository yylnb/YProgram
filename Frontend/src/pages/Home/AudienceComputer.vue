<template>
  <section class="audience-cards" aria-label="å—ä¼—ç¾¤ä½“">
    <div class="container">
      <h2 class="heading">é€‚é…ä¸åŒåœºæ™¯ä¸å¹´é¾„</h2>
      <p class="sub">ä¸ºå­¦ç”Ÿã€èŒåœºäººä¸å­©å­æä¾›å®šåˆ¶åŒ–çš„ç¼–ç¨‹å­¦ä¹ è·¯å¾„</p>

      <div class="grid">
        <FlipCard
          v-for="(a, idx) in audiences"
          :key="idx"
          class="group flip-card-wrapper"
          :aria-labelledby="`title-${idx}`"
          :flipOnHover="true"x
          :clickable="true"
        >
          <!-- front: ç…§ç‰‡ + åº•éƒ¨å±…ä¸­ emoji + title -->
          <template #default>
            <div class="front-face">
              <div class="front-media" aria-hidden="true">
                <picture>
                  <source :srcset="a.srcset" sizes="800px" />
                  <img
                    :src="a.src"
                    :alt="a.title + ' èƒŒæ™¯å›¾'"
                    loading="lazy"
                    class="front-image"
                  />
                </picture>
              </div>

              <!-- bottom overlay: emoji + titleï¼ˆé«˜åº¦æ›´å°ï¼‰ -->
              <div class="front-meta" :id="`title-${idx}`">
                <div class="meta-inner">
                  <div class="emoji" aria-hidden="true">{{ a.emoji }}</div>
                  <div class="title">{{ a.title }}</div>
                </div>
              </div>
            </div>
          </template>

          <!-- back: tagline + desc + button -->
          <template #back>
            <div class="back-face">
              <div class="back-content">
                <h3 class="back-tagline">{{ a.tagline }}</h3>
                <p class="back-desc">{{ a.desc }}</p>
                <a :href="a.link" class="btn" :aria-label="`ä½“éªŒ ${a.title}`">å»ä½“éªŒ</a>
              </div>
            </div>
          </template>
        </FlipCard>
      </div>
    </div>
  </section>
</template>

<script setup>
import { ref } from 'vue'
import FlipCard from '../../components/ui/flip-card/FlipCard.vue'

const audiences = ref([
  {
    title: 'å­¦ç”Ÿ',
    emoji: 'ğŸ“',
    tagline: 'æ€ä¹ˆå­¦éƒ½å­¦ä¸ä¼šï¼Ÿ',
    desc: 'æµ·é‡é¢˜åº“ã€åˆ«å‡ºå¿ƒè£çš„åˆ·é¢˜æ–¹å¼ï¼Œå¸®ä½ ç¨³æ‹¿é«˜åˆ†ã€‚',
    src: '/student.jpg',
    srcset: '/student-800.jpg 800w',
    link: '/map'
  },
  {
    title: 'æ±‚èŒè€…',
    emoji: 'ğŸ”',
    tagline: 'æ‰¾å·¥ä½œæ€•æŠ€èƒ½ä¸å¤Ÿï¼Ÿ',
    desc: 'å¸®åŠ©ä½ ä»æŠ•ç®€å†åˆ°æ‹¿ Offer æ›´è‡ªä¿¡ã€‚',
    src: '/jobhunter.jpg',
    srcset: '/jobhunter-800.jpg 800w',
    link: '/map'
  },
  {
    title: 'å°±ä¸šè€…',
    emoji: 'ğŸ’¼',
    tagline: 'å·¥ä½œä¸­å›°éš¾æ— æ³•è§£å†³ï¼Ÿ',
    desc: 'å°è¯•ä½¿ç”¨ç¼–ç¨‹å·¥å…·ï¼Œå¸®åŠ©ä½ åˆ›æ–°æ€§æé«˜æ•ˆç‡ã€‚',
    src: '/worker.jpg',
    srcset: '/worker-800.jpg 800w',
    link: '/map'
  },
  // {
  //   title: 'é•¿è€…',
  //   emoji: 'ğŸ§“',
  //   tagline: 'æœ‰ç‚¹è·Ÿä¸ä¸Šæ—¶ä»£ï¼Ÿ',
  //   desc: 'ä»å…¥é—¨åˆ°è¶£å‘³é¡¹ç›®ã€å¾ªåºæ¸è¿›ï¼Œè®©ä½ ä¹Ÿèƒ½ä¸æ—¶ä¿±è¿›ã€‚',
  //   src: '/elderly.jpg',
  //   srcset: '/elderly-480.jpg 480w, /elderly-800.jpg 800w, /elderly-1200.jpg 1200w',
  //   link: '/map'
  // },
  {
    title: 'å¹¼å„¿',
    emoji: 'ğŸ§¸',
    tagline: 'ä»å°åŸ¹å…»å­¦ä¹ å…´è¶£ï¼Ÿ',
    desc: 'æœ‰è¶£çš„å¯è§†åŒ–ç¼–ç¨‹ä¸äº¤äº’ï¼Œè®©å­©å­åœ¨æ¸¸æˆä¸­å­¦ä¼šé€»è¾‘ä¸åˆ›é€ ã€‚',
    src: '/children.jpg',
    srcset: '/children-800.jpg 800w',
    link: '/map'
  },
  // {
  //   title: 'æ•™å¸ˆ',
  //   emoji: 'ğŸ‘©â€ğŸ«',
  //   tagline: 'æƒ³è¦æ›´å¥½çš„æ•™å­¦å·¥å…·ï¼Ÿ',
  //   desc: 'ä¸°å¯Œçš„æ•™å­¦èµ„æºä¸è¯¾ç¨‹ï¼ŒåŠ©åŠ›è€å¸ˆé«˜æ•ˆå¤‡è¯¾ä¸æˆè¯¾ã€‚',
  //   src: '/teacher.jpg',
  //   srcset: '/children-480.jpg 480w, /children-800.jpg 800w, /children-1200.jpg 1200w',
  //   link: '/map'
  // }
])
</script>

<style scoped>
/* é¡µé¢èƒŒæ™¯ï¼šé»‘è‰² */
.audience-cards {
  padding: 48px 20px;
  box-sizing: border-box;
  background: #000; /* é¡µé¢èƒŒæ™¯é»‘è‰² */
  color: #ffffff; /* å…¨å±€å­—ä½“é»˜è®¤ç™½è‰² */
}

/* container å±…ä¸­å†…å®¹ï¼ˆå†…å®¹åŒºä»ä¸ºç™½è‰²æ–‡æœ¬ï¼‰ */
.container {
  max-width: 1100px;
  margin: 0 auto;
  text-align: center;
}

/* æ ‡é¢˜æ ·å¼ï¼šç™½è‰² */
.heading {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 6px;
  color: #fff;
}
.sub {
  color: rgba(255,255,255,0.75);
  margin-bottom: 20px;
}

/* ç½‘æ ¼å¸ƒå±€ */
.grid { display: grid; grid-template-columns: 1fr; gap: 18px; }
@media (min-width: 640px) { .grid { grid-template-columns: repeat(2, 1fr); gap: 20px; } }
@media (min-width: 1024px) { 
  .grid { grid-template-columns: repeat(2, 1fr); gap: 24px; } 
  .flip-card-wrapper {
    max-width: 500px;
  }
}

/* å¡ç‰‡åŒ…è£…å™¨ï¼šæ¸å˜èƒŒæ™¯ + ç™½è‰²å­—ä½“ */
.flip-card-wrapper {
  width: 100%;
  height: 100%;
  min-height: 280px;
  border-radius: 12px;
  /* æ¸å˜èƒŒæ™¯ï¼ˆä» #0e78e9 åˆ° #ed3aedï¼‰ */
  /* background: linear-gradient(180deg, #0e78e9 0%, #ed3aed 100%); */
  background: black;
  box-shadow: 0 12px 36px rgba(0,0,0,0.5);
  display: block;
  color: #ffffff; /* å¡ç‰‡å†…æ–‡å­—ç™½è‰² */
  overflow: hidden;
}

/* é¼ æ ‡ hover æ—¶åŠ æ·±é˜´å½±ï¼ˆç¿»è½¬ç”±ç»„ä»¶æ§åˆ¶ï¼‰ */
.flip-card-wrapper:hover { box-shadow: 0 28px 56px rgba(0,0,0,0.6); }

/* front é¢å¸ƒå±€ */
.front-face {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
}

/* å›¾ç‰‡å ä¸Šéƒ¨åˆ†ï¼ˆå›ºå®šé«˜åº¦ï¼‰ï¼Œå›¾ç‰‡ä¹‹ä¸Šä»å¯çœ‹åˆ°å¡ç‰‡æ¸å˜ä½œä¸ºåº•è‰²çš„è¾¹ç¼˜ */
.front-media { width: 100%; height: 230px; overflow: hidden; background: transparent; }
.front-image { width: 100%; height: 100%; object-fit: cover; display: block; }

/* åº•éƒ¨å…ƒæ•°æ®è¦†ç›–ï¼šé«˜åº¦æ›´å°ï¼ˆæ›´ç²¾ç®€ï¼‰ */
.front-meta {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 8px 10px; /* ç¼©å°å†…è¾¹è· */
  display: flex;
  justify-content: center;
  align-items: center;
  /* æ›´è½»çš„åŠé€æ˜å å±‚ï¼Œä¿ç•™å¡ç‰‡æ¸å˜è‰²è°ƒä½†æ›´æš—ä»¥ç¡®ä¿ç™½å­—å¯è¯» */
  background: linear-gradient(180deg, rgba(14,120,233,0.0) 0%, rgba(0,0,0,0.35) 100%);
}

/* meta å†…éƒ¨ï¼šemoji + title å‚ç›´å¸ƒå±€ï¼Œé—´è·æ›´å° */
.meta-inner {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 15px; /* ç¼©å°é—´è· */
}
.emoji { font-size: 1.5rem; line-height: 1; } 
.title { font-weight: 1000; color: #ffffff; font-size: 1.5rem; }

/* back é¢å¸ƒå±€ï¼šä½¿ç”¨åŒæ ·æ¸å˜ï¼ˆæ›´æ·±ï¼‰å¹¶ä¸ºæ–‡æœ¬ç•™ç™½ */
.back-face {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: stretch;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
  /* èƒŒé¢ä¹Ÿä½¿ç”¨æ¸å˜ï¼Œä½†åæ·±ä»¥åŒºåˆ†æ­£é¢ï¼ˆä¿æŒä¸å¡ç‰‡ä¸»è‰²ä¸€è‡´ï¼‰ */
  /* background: linear-gradient(180deg, rgba(14,120,233,0.95) 0%, rgba(237,58,237,0.95) 100%); */
  color: #ffffff;
  background:
  radial-gradient(
    circle at top right,
    #4c4c4c,
    transparent 40%
  ),
  radial-gradient(
    circle at bottom left,
    #4c4c4c,
    transparent 40%
  ),
  #232323;
}

.back-content {
  width: 100%;
  max-width: 420px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.back-tagline {
  margin: 0;
  font-size: 1.05rem;
  font-weight: 700;
  color: #ffffff;
}
.back-desc {
  margin: 0;
  color: rgba(255,255,255,0.9);
  font-size: 0.95rem;
}

/* æŒ‰é’®ï¼šåç™½ï¼ˆç™½è‰²æ–‡æœ¬åœ¨æ¸å˜ä¸Šï¼‰ï¼Œå¹¶åŠ æ·±é˜´å½±ä»¥å¢å¼ºå¯ç‚¹å‡»æ„Ÿ */
.back-actions { margin-top: 12px; display: flex; justify-content: flex-end; }
.btn {
  display: inline-block;
  padding: 8px 14px;
  border-radius: 999px;
  background: rgba(255,255,255,0.12); /* è½»å¾®åŠé€æ˜ç™½ä½œä¸ºæŒ‰é’®èƒŒæ™¯ */
  color: #ffffff;
  text-decoration: none;
  font-weight: 700;
  border: 1px solid rgba(255,255,255,0.12);
  transition: transform .12s, background .12s, box-shadow .12s;
}
/* === ä¿®æ”¹ç‚¹ï¼šå½“ hover / active / focus-visible æ—¶ï¼Œä½¿ç”¨ä» #0e78e9 åˆ° #ed3aed çš„æ¸å˜å¡«å…… === */
.btn:hover,
.btn:active,
.btn:focus-visible {
  transform: translateY(-2px);
  /* æ¸å˜å¡«å……ï¼ˆæ°´å¹³æ¸å˜ï¼‰ */
  /* background-image: linear-gradient(45deg, #196ac1 0%, #bb38bb 100%);
  background-color: transparent; */
  color: #ffffff;
  border: 1px solid rgba(255,255,255,0.08); /* è½»ä¿ç•™è¾¹æ¡†ï¼Œé¿å…çªç„¶æ¶ˆå¤± */
  box-shadow: 0 6px 18px rgba(14,120,233,0.18);
  outline: none;
  background: #6b21a8;
  box-shadow: 0 36px 80px rgba(132, 63, 141, 0.479);
}

/* å“åº”å¼ï¼šå°å±æ—¶å›¾ç‰‡é«˜åº¦å‡å°ä¸å¡ç‰‡é«˜åº¦è°ƒæ•´ */
@media (max-width: 639px) {
  .front-media { height: 140px; }
  .flip-card-wrapper { min-height: 240px; }
}

/* æš—è‰²ä¸»é¢˜å…¼å®¹ï¼ˆé¡µé¢å·²æ˜¯é»‘è‰²ï¼Œä¿ç•™ç™½å­—ï¼‰ */
@media (prefers-color-scheme: dark) {
  .audience-cards { background: #000; }
  .heading { color: #fff; }
  .sub { color: rgba(255,255,255,0.75); }
  .title { color: #fff; }
  .back-desc { color: rgba(255,255,255,0.92); }
}
</style>