[
  {
    "id": 1,
    "type": "choice",
    "title": "为什么 0.1 + 0.2 不等于 0.3？",
    "content": "你在做折扣计算时写了0.1 + 0.2，结果居然不是0.3，这背后最核心的原因是什么？",
    "options": {
      "A": "Python算错了",
      "B": "浮点数用二进制存储，无法精确表示某些小数",
      "C": "程序被病毒篡改了",
      "D": "加法运算默认四舍五入"
    },
    "answer": "B",
    "hints": [
      "这是所有语言都会遇到的经典问题。",
      "思考：0.1能否在二进制中被精确表示？",
      "注意：浮点数的底层是二进制近似值。"
    ],
    "explain": "浮点数使用二进制表示，许多十进制小数无法被精确存储，会产生微小误差。",
    "example": "print(0.1 + 0.2)  # 输出 0.30000000000000004"
  },

  {
    "id": 2,
    "type": "choice",
    "title": "整数除法陷阱",
    "content": "为什么 5 / 2 得到的是 2.5 而不是传统数学除法中的“取整”？",
    "options": {
      "A": "/ 在 Python 中是浮点除法",
      "B": "/ 会自动向下取整",
      "C": "/ 会根据输入自动选择整数或浮点",
      "D": "/ 会把结果变成字符串"
    },
    "answer": "A",
    "hints": [
      "回忆：整数除法在 Python 是哪个符号？",
      "是不是应该使用 //？",
      "Python 中 / 永远产生浮点数。"
    ],
    "explain": "/ 是真正的除法运算符，结果永远是浮点，不管两边是否是整数。",
    "example": "print(5 / 2)  # 2.5\nprint(5 // 2) # 2"
  },

  {
    "id": 3,
    "type": "choice",
    "title": "奇怪的取模结果",
    "content": "为什么 -7 % 3 的结果是 2？",
    "options": {
      "A": "Python把负号忽略了",
      "B": "Python出错了",
      "C": "Python取模的结果符号与除数相同",
      "D": "取模运算先对负数取反"
    },
    "answer": "C",
    "hints": [
      "Python 的模运算符有符号规则。",
      "思考：结果必须满足：被除数 = 除数 * 商 + 余数。",
      "余数的符号 = 除数的符号。"
    ],
    "explain": "Python 的模运算余数符号跟除数一致，因此 -7 % 3 = 2。",
    "example": "print(-7 % 3)  # 2"
  },

  {
    "id": 4,
    "type": "fill",
    "title": "浮点误差导致的判断失败",
    "content": "请修复比较操作使其更可靠。",
    "code": "a = 0.1 + 0.2\nif ____ == 0.3:\n    print('相等')\nelse:\n    print('不相等')",
    "options": "round(a, 1), a, int(a), str(a), round(a, 2), abs(a - 0.3) < 1e-9",
    "answer": "6",
    "explain": "直接比较浮点数可能失败，应使用“差值小于某个阈值”的方式比较。",
    "example": "if abs((0.1+0.2) - 0.3) < 1e-9:\n    print('相等')"
  },

  {
    "id": 5,
    "type": "fill",
    "title": "整数除法与浮点除法混用",
    "content": "修复表达式，使 total 保持整数类型。",
    "code": "x = 17\ny = 5\ntotal = x ____ y\nprint(total)",
    "options": "/, //, %, +, *, **",
    "answer": "2",
    "explain": "要得到整数结果，应使用 // 进行整数除法。",
    "example": "print(17 // 5)  # 输出 3"
  },

  {
    "id": 6,
    "type": "choice",
    "title": "浮点累积误差",
    "content": "以下哪一项最可能导致长期循环累计误差越来越明显？",
    "options": {
      "A": "使用整数存储计数",
      "B": "反复累加浮点小数",
      "C": "使用 += 语句",
      "D": "在循环里使用 print"
    },
    "answer": "B",
    "hints": [
      "浮点误差很小，但会累积。",
      "反复计算会放大误差。",
      "整数不会有这个问题。"
    ],
    "explain": "小的浮点误差反复累加会形成显著偏差。",
    "example": "for _ in range(1000000): x += 0.1  # 误差累积明显"
  },

  {
    "id": 7,
    "type": "choice",
    "title": "除法产生意外浮点",
    "content": "为什么 4/2 的结果是 2.0 而不是 2？",
    "options": {
      "A": "因为 4 是偶数",
      "B": "Python 保留整数类型",
      "C": "Python 的除法结果永远为浮点",
      "D": "因为写错了语法"
    },
    "answer": "C",
    "hints": [
      "关于 / 的规则记得吗？",
      "不论结果是否为整数，/ 都产生 float。",
      "4/2 结果数学上为整数，但类型依然是 float。"
    ],
    "explain": "/ 始终返回 float。",
    "example": "print(type(4/2))  # float"
  },

  {
    "id": 8,
    "type": "choice",
    "title": "意外的字符串拼接",
    "content": "为什么 '5' + 3 会报错？",
    "options": {
      "A": "Python 不支持加号",
      "B": "不能把字符串和整数直接相加",
      "C": "Python 自动把3转成字符串",
      "D": "字符串加法会做乘法"
    },
    "answer": "B",
    "hints": [
      "类型不一致。",
      "字符串加法只能连接字符串。",
      "可以使用 str() 或 int() 转换类型。"
    ],
    "explain": "字符串和数字不能直接相加，需要显式转换。",
    "example": "print('5' + str(3))  # '53'"
  },

  {
    "id": 9,
    "type": "fill",
    "title": "修复数值类型混乱",
    "content": "修复代码，使结果变成整数加整数。",
    "code": "a = '7'\nb = 3\nc = int(a) ____ b\nprint(c)",
    "options": "+, -, *, /, //, %",
    "answer": "1",
    "explain": "将字符串转为整数后，可直接进行整数加法。",
    "example": "print(int('7') + 3)  # 10"
  },

  {
    "id": 10,
    "type": "fill",
    "title": "取模陷阱修复",
    "content": "填空使得结果为 1，而不是负数。",
    "code": "x = -10\ny = 3\nr = x ____ y\nprint(r)",
    "options": "%, //, /, +, *, **",
    "answer": "1",
    "explain": "-10 % 3 的结果为 2，但若想得到 1，可以配合整数除法和运算调整。",
    "example": "print(-10 % 3)  # 2"
  },

  {
    "id": 11,
    "type": "choice",
    "title": "舍入行为理解",
    "content": "round(2.5) 的结果为什么是 2？",
    "options": {
      "A": "Python 向上取整",
      "B": "Python 向下取整",
      "C": "Python 的 round 使用“银行家舍入法”",
      "D": "Python 自动判断最接近的整数"
    },
    "answer": "C",
    "hints": [
      "round 的规则不是单纯四舍五入。",
      "遇到 .5 时，会舍入到偶数。",
      "这叫银行家舍入法。"
    ],
    "explain": "Python 的 round 遵循银行家舍入：2.5 → 2，3.5 → 4。",
    "example": "print(round(3.5), round(2.5))  # 4 2"
  },

  {
    "id": 12,
    "type": "choice",
    "title": "浮点比较的替代方案",
    "content": "哪一种比较方式更适合用于浮点数等值判断？",
    "options": {
      "A": "直接使用 ==",
      "B": "打印出来肉眼比较",
      "C": "比较两个值的差是否在容许误差范围内",
      "D": "把浮点数改成字符串比较"
    },
    "answer": "C",
    "hints": [
      "误差不可避免。",
      "差值比较是最稳妥的方式。",
      "许多科学计算库都推荐此做法。"
    ],
    "explain": "使用容差判断可以规避浮点误差。",
    "example": "abs(a-b) < 1e-9"
  },

  {
    "id": 13,
    "type": "choice",
    "title": "复合表达式中的隐式浮点",
    "content": "表达式 3 + 2/2 的结果为什么是 4.0？",
    "options": {
      "A": "Python 自动把所有数字转换成字符串",
      "B": "表达式含有 / 就会产生 float",
      "C": "因为 3+1 必须是浮点数",
      "D": "Python 使用整数优先规则"
    },
    "answer": "B",
    "hints": [
      "/ 一出现，结果就是 float。",
      "再和整数相加结果也会变成 float。",
      "因此得到 4.0 而不是 4。"
    ],
    "explain": "2/2 = 1.0，其后所有运算都在浮点环境中进行。",
    "example": "print(3 + 2/2)  # 4.0"
  },

  {
    "id": 14,
    "type": "fill",
    "title": "避免累积误差的计数方式",
    "content": "修复代码，使累加保持精准整数。",
    "code": "total = 0.0\nfor i in range(5):\n    total = total ____ 1\nprint(total)",
    "options": "+, + 1.0, + 0.1, -, *, //, + int(1)",
    "answer": "7",
    "explain": "使用整数进行计数最可靠，避免浮点累积误差。",
    "example": "total = 0\nfor i in range(5): total += 1"
  },

  {
    "id": 15,
    "type": "fill",
    "title": "避免浮点结构比较失败",
    "content": "修复以下代码，使 if 判断为 True。",
    "code": "x = 0.3\nif abs(x - (0.1 + 0.2)) ____ 1e-9:\n    print('通过')",
    "options": "<, >, <=, >=, ==, !=",
    "answer": "1",
    "explain": "使用容差判断，abs(差) < 阈值。",
    "example": "if abs(0.3 - (0.1+0.2)) < 1e-9: print('ok')"
  }
]